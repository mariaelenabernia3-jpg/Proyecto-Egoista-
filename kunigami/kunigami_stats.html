<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estadísticas de Manuel - Blue Lock</title>
    <link rel="stylesheet" href="kunigami_stats_style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="header">
        <a href="kunigami_dashboard.html" class="back-button"><i class="fas fa-arrow-left"></i> VOLVER</a>
    </div>

    <main class="main-content">
        <div class="player-card">
            <div class="player-image-container">
                <img src="kunigami.png" alt="Manuel" class="player-image">
            </div>
            <div class="player-details">
                <p class="detail-item">Nombre: <span class="detail-value">Manuel</span></p>
                <p class="detail-item">Posición: <span class="detail-value">DC</span></p>
                <p class="detail-item">Media General: <span class="detail-value" id="stat-media">--</span></p>
                
                <div class="match-history-grid">
                    <p>PJ: <span id="stat-pj">0</span></p>
                    <p>PG: <span id="stat-pg">0</span></p>
                    <p>PP: <span id="stat-pp">0</span></p>
                    <p>GOLES: <span id="stat-g" style="color: gold;">0</span></p>
                </div>

                <div class="stats-grid" id="skills-grid">
                    <!-- Habilidades dinámicas cargadas desde el Panel de Ego -->
                </div>
            </div>
        </div>
    </main>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

<script>
  const myId = "Kunigami"; // CAMBIA ESTO PARA CADA JUGADOR

  const firebaseConfig = {
    apiKey: "AIzaSyDSyHDZzCzqtDfQ7AvtP7or0Lz81HO3A88",
    authDomain: "bluelock-proyecto.firebaseapp.com",
    databaseURL: "https://bluelock-proyecto-default-rtdb.firebaseio.com",
    projectId: "bluelock-proyecto",
    storageBucket: "bluelock-proyecto.firebasestorage.app",
    messagingSenderId: "780939191248",
    appId: "1:780939191248:web:0ba0c191005a7870488fd5"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  // Escuchar a Firebase
  db.ref('players/' + myId).on('value', (snapshot) => {
      const me = snapshot.val();
      if (!me) return;

      // Actualizar Goles, Partidos y Media
      document.getElementById('stat-media').textContent = me.stats.media;
      document.getElementById('stat-pj').textContent = me.matchStats.pj;
      document.getElementById('stat-pg').textContent = me.matchStats.pg;
      document.getElementById('stat-pp').textContent = me.matchStats.pp;
      document.getElementById('stat-g').textContent = me.matchStats.g;
      if(me.img) document.getElementById('stat-img').src = me.img;

      // Actualizar Skills
      const skills = [
          {n: 'Ritmo', v: me.stats.ritmo}, {n: 'Tiro', v: me.stats.tiro},
          {n: 'Pase', v: me.stats.pase}, {n: 'Regate', v: me.stats.regate},
          {n: 'Defensa', v: me.stats.defensa}, {n: 'Físico', v: me.stats.fisico}
      ];

      document.getElementById('skills-grid').innerHTML = skills.map(s => `
          <div class="stat-item">
              <span class="stat-name">${s.n}</span>
              <span class="stat-value">${s.v}</span>
          </div>
      `).join('');
  });
</script>
</body>
</html>